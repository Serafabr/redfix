<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
</head>
<body class="container w-50 text-justify">
  <h1 class="text-center py-3 font-weight-bold">RedFix</h1>
  <h3 class="text-center font-weight-bold">üìÅ database</h3>
  <hr/>

<p>O sistema gerenciador de banco de dados relacional (RDBMS) √© o <a href="https://www.postgresql.org/">PostgreSQL</a>.</p>

<h3>Extens√µes</h3>

<p>Por enquanto apenas a extens√£o <code><a href="https://www.postgresql.org/docs/12/pgcrypto.html">pgcrypto</a></code> √© utilizada (para encripta√ß√£o de senhas de usu√°rios e posterior verifica√ß√£o na autentica√ß√£o).</p>

<h3>Schemas</h3>

<p>Os objetos do banco de dados s√£o organizados em 3 schemas ("namespaces"):</p>
<ul>
  <li><strong>public</strong>, que √© o schema default e cont√©m:
    <ul>
      <li>Objetos que definem o modelo f√≠sico dos dados (tabelas)</li>
      <li>Objetos adicionados por meio de <code>CREATE EXTENSION</code></li>
      <li>Fun√ß√µes que devem ser acessadas por todos os roles (e.g. <code>get_person_id</code>)</li>
      <li>Objetos auxiliares como types, enums, trigger functions etc.</li>
    </ul>
  </li>
  <li><strong>api</strong>, que cont√©m views e fun√ß√µes que servem como Queries e Mutations da API GraphQL
  </li>
  <li><strong>web</strong>, que cont√©m fun√ß√µes acess√≠veis por rotas espec√≠ficas do web server (e.g., para autentica√ß√£o)
  </li>
</ul>

<p>
  Os pap√©is (roles) no banco de dados correspondem aos seguintes grupos de usu√°rios:
</p>
<table>
  <thead>
    <tr>
      <th>Role</th>
      <th>Grupo de usu√°rios</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>administrator</td>
      <td>Servidores lotados no SEPLAG</td>
    </tr>
    <tr>
      <td>supervisor</td>
      <td>Servidores efetivos da SINFRA</td>
    </tr>
    <tr>
      <td>inspector</td>
      <td>Terceirizados que atuam na fiscaliza√ß√£o</td>
    </tr>
    <tr>
      <td>employee</td>
      <td>Terceirizados que atuam no √¢mbito dos contratos de manuten√ß√£o</td>
    </tr>
    <tr>
      <td>visitor</td>
      <td>Somente para leitura de dados</td>
    </tr>
  </tbody>
</table>

</body>
</html>
